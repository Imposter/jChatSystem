# Compile configuration
SRC = $(wildcard jchat_server/src/*.cpp) $(wildcard jchat_server/src/*/*.cpp)
OBJ = $(patsubst %.cpp, %.o, $(SRC))

all: clean build

clean:
	rm -f build/jchat_server

build: jchat_server
	echo "Build complete!"

%.o: %.cpp
	g++ -c -g -std=c++11 \
	-I jchat_lib/ \
	-I jchat_common/ \
	-I jchat_server/include/ \
	-o $*.o $*.cpp

jchat_server: $(OBJ)
	g++ -g -pthread -std=c++11 -o build/jchat_server $(OBJ)
	rm -f $(OBJ)

.PHONY: all clean build %.o jchat_server
